var path = require('path'),
    gutil = require('gulp-util'),
    until = require('./util.js');

module.exports = function (evt) {
    var msg = '       ',
        i;

    // shorten path
    evt.file = evt.file.replace(path.join(path.resolve('./'), '/'), '');

    // colorify
    evt.file = evt.pass ? evt.file.green : evt.file.red;
    // print file name
    msg += evt.file;

    // add reasons to errors
    if (!evt.pass) {
        for (i = 0; i < evt.errors.length; i += 1) {
            if (evt.errors[i]) {

                gutil.log(evt.errors[i]);
                msg += ('\n           ' +
                evt.errors[i].line + ':' +
                evt.errors[i].character + ': ' +
                evt.errors[i].reason).red;
            }
        }
    }
    var reportDir = path.join(path.join(path.resolve('./'), '/'), './.report');
    // write to screen
    if (!evt.pass) {
        gutil.log(msg);
    }
};